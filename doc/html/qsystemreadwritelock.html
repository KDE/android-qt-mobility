<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!-- qsystemreadwritelock_unix.cpp -->
<head>
  <title>QSystemReadWriteLock Class Reference</title>
  <link href="classic.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><a href="http://qt.nokia.com/"><img src="images/qtlogo.png" align="left" border="0" /></a></td>
<td width="1">&nbsp;&nbsp;</td><td class="postheader" valign="center"><a href="index.html"><font color="#004faf">Home</font></a>&nbsp;&middot; <a href="classes.html"><font color="#004faf">All&nbsp;Classes</font></a>&nbsp;&middot; <a href="functions.html"><font color="#004faf">All&nbsp;Functions</font></a>&nbsp;&middot;</td>
<td align="right" valign="top" width="230"><img src="images/codeless.png"  border="0" /></td></tr></table><h1 class="title">QSystemReadWriteLock Class Reference</h1>
<p>The QSystemReadWriteLock class provides read-write locking between processes. <a href="#details">More...</a></p>
<pre>    #include &lt;QSystemReadWriteLock&gt;</pre><ul>
<li><a href="qsystemreadwritelock-members.html">List of all members, including inherited members</a></li>
</ul>
<hr />
<a name="public-types"></a>
<h2>Public Types</h2>
<table class="alignedsummary" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td class="memItemLeft" align="right" valign="top">enum </td><td class="memItemRight" valign="bottom"><b><a href="qsystemreadwritelock.html#AccessMode-enum">AccessMode</a></b> { Create, Open }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum </td><td class="memItemRight" valign="bottom"><b><a href="qsystemreadwritelock.html#SystemReadWriteLockError-enum">SystemReadWriteLockError</a></b> { NoError, PermissionDenied, KeyError, NotFound, ..., UnknownError }</td></tr>
</table>
<hr />
<a name="public-functions"></a>
<h2>Public Functions</h2>
<table class="alignedsummary" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td class="memItemLeft" align="right" valign="top"></td><td class="memItemRight" valign="bottom"><b><a href="qsystemreadwritelock.html#QSystemReadWriteLock">QSystemReadWriteLock</a></b> ( const QString &amp; <i>key</i>, AccessMode <i>mode</i> = Open )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"></td><td class="memItemRight" valign="bottom"><b><a href="qsystemreadwritelock.html#dtor.QSystemReadWriteLock">~QSystemReadWriteLock</a></b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">SystemReadWriteLockError </td><td class="memItemRight" valign="bottom"><b><a href="qsystemreadwritelock.html#error">error</a></b> () const</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QString </td><td class="memItemRight" valign="bottom"><b><a href="qsystemreadwritelock.html#errorString">errorString</a></b> () const</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QString </td><td class="memItemRight" valign="bottom"><b><a href="qsystemreadwritelock.html#key">key</a></b> () const</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool </td><td class="memItemRight" valign="bottom"><b><a href="qsystemreadwritelock.html#lockForRead">lockForRead</a></b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool </td><td class="memItemRight" valign="bottom"><b><a href="qsystemreadwritelock.html#lockForWrite">lockForWrite</a></b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="qsystemreadwritelock.html#unlock">unlock</a></b> ()</td></tr>
</table>
<a name="details"></a>
<hr />
<h2>Detailed Description</h2>
<p>The QSystemReadWriteLock class provides read-write locking between processes.</p>
<p>A read-write lock is a synchronization tool for protecting resources that can be accessed for reading and writing. This type of lock is useful if you want to allow multiple processes/threads to have simultaneous read-only access, but as soon as one thread wants to write to the resource, all other threads must be blocked until the writing is complete.</p>
<p>QSystemReadWriteLock behaves much like the <a href="http://qt.nokia.com/doc/4.5/qreadwritelock.html">QReadWriteLock</a> class, but it also works across multiple processes (although it also works perfectly well, albeit slightly less efficiently, in a single process). The system resources are cleaned up when the last QSystemReadWriteLock instance is destroyed.</p>
<p>The behaviour of QSystemReadWriteLock is such that writers will take precedence over readers. When writers are waiting, any new readers must wait until all writers complete. That is, writers can starve readers.</p>
<hr />
<h2>Member Type Documentation</h2>
<h3 class="fn"><a name="AccessMode-enum"></a>enum QSystemReadWriteLock::AccessMode</h3>
<h3 class="fn"><a name="SystemReadWriteLockError-enum"></a>enum QSystemReadWriteLock::SystemReadWriteLockError</h3>
<hr />
<h2>Member Function Documentation</h2>
<h3 class="fn"><a name="QSystemReadWriteLock"></a>QSystemReadWriteLock::QSystemReadWriteLock ( const <a href="http://qt.nokia.com/doc/4.5/qstring.html">QString</a> &amp; <i>key</i>, <a href="qsystemreadwritelock.html#AccessMode-enum">AccessMode</a> <i>mode</i> = Open )</h3>
<p>Construct a system read write lock from the provided <i>key</i>.</p>
<p>The <i>mode</i> parameter is only used in Unix systems to handle the case where underlying system resources such as semaphores survive a process crash. In this case, the next process to instatiate a lock will get the resources that survived the crash, and unless <i>mode</i> is Create, the resources will not be reset.</p>
<h3 class="fn"><a name="dtor.QSystemReadWriteLock"></a>QSystemReadWriteLock::~QSystemReadWriteLock ()</h3>
<p>Destroy the lock instance. The last <a href="qsystemreadwritelock.html">QSystemReadWriteLock</a> instance for a particular key will destroy the underlying system resources.</p>
<h3 class="fn"><a name="error"></a><a href="qsystemreadwritelock.html#SystemReadWriteLockError-enum">SystemReadWriteLockError</a> QSystemReadWriteLock::error () const</h3>
<p>Returns the error code of the last encountered error</p>
<h3 class="fn"><a name="errorString"></a><a href="http://qt.nokia.com/doc/4.5/qstring.html">QString</a> QSystemReadWriteLock::errorString () const</h3>
<p>Returns a string describing the last encountered error</p>
<h3 class="fn"><a name="key"></a><a href="http://qt.nokia.com/doc/4.5/qstring.html">QString</a> QSystemReadWriteLock::key () const</h3>
<p>Return the key of the lock as passed to the constructor.</p>
<h3 class="fn"><a name="lockForRead"></a>bool QSystemReadWriteLock::lockForRead ()</h3>
<p>Locks the lock for reading. The function will block if any thread/process has locked for writing.</p>
<h3 class="fn"><a name="lockForWrite"></a>bool QSystemReadWriteLock::lockForWrite ()</h3>
<p>Locks the lock for writing. This function will block if another thread/process has locked for reading or writing.</p>
<h3 class="fn"><a name="unlock"></a>void QSystemReadWriteLock::unlock ()</h3>
<p>Release the lock.</p>
<p /><address><hr /><div align="center">
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td align="left">Copyright &copy; 2009 Nokia Corporation and/or its subsidiary(-ies)</td>
<td align="right"><div align="right">Qt Mobility API 1.0.0</div></td>
</tr></table></div></address></body>
</html>
