<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!-- qvaluespaceobject.cpp -->
<head>
  <title>QValueSpaceObject Class Reference</title>
  <link href="classic.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><img src="images/qtlogo.png" align="left" border="0" /></td>
<td width="1">&nbsp;&nbsp;</td><td class="postheader" valign="center"><a href="index.html"><font color="#004faf">Home</font></a></td>
<td align="right" valign="top" width="230"><img src="images/codeless.png"  border="0" /></td></tr></table><h1 class="title">QValueSpaceObject Class Reference</h1>
<p>The QValueSpaceObject class allows applications to add entries to the Value Space. <a href="#details">More...</a></p>
<pre>    #include &lt;QValueSpaceObject&gt;</pre><ul>
<li><a href="qvaluespaceobject-members.html">List of all members, including inherited members</a></li>
</ul>
<hr />
<a name="public-functions"></a>
<h2>Public Functions</h2>
<table class="alignedsummary" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td class="memItemLeft" align="right" valign="top"></td><td class="memItemRight" valign="bottom"><b><a href="qvaluespaceobject.html#QValueSpaceObject">QValueSpaceObject</a></b> ( const QString &amp; <i>path</i>, QObject * <i>parent</i> = 0 )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"></td><td class="memItemRight" valign="bottom"><b><a href="qvaluespaceobject.html#QValueSpaceObject-2">QValueSpaceObject</a></b> ( const char * <i>path</i>, QObject * <i>parent</i> = 0 )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"></td><td class="memItemRight" valign="bottom"><b><a href="qvaluespaceobject.html#QValueSpaceObject-3">QValueSpaceObject</a></b> ( const QString &amp; <i>path</i>, QValueSpace::LayerOptions <i>filter</i>, QObject * <i>parent</i> = 0 )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"></td><td class="memItemRight" valign="bottom"><b><a href="qvaluespaceobject.html#QValueSpaceObject-4">QValueSpaceObject</a></b> ( const char * <i>path</i>, QValueSpace::LayerOptions <i>filter</i>, QObject * <i>parent</i> = 0 )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"></td><td class="memItemRight" valign="bottom"><b><a href="qvaluespaceobject.html#QValueSpaceObject-5">QValueSpaceObject</a></b> ( const QString &amp; <i>path</i>, const QUuid &amp; <i>uuid</i>, QObject * <i>parent</i> = 0 )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"></td><td class="memItemRight" valign="bottom"><b><a href="qvaluespaceobject.html#QValueSpaceObject-6">QValueSpaceObject</a></b> ( const char * <i>path</i>, const QUuid &amp; <i>uuid</i>, QObject * <i>parent</i> = 0 )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual </td><td class="memItemRight" valign="bottom"><b><a href="qvaluespaceobject.html#dtor.QValueSpaceObject">~QValueSpaceObject</a></b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool </td><td class="memItemRight" valign="bottom"><b><a href="qvaluespaceobject.html#isConnected">isConnected</a></b> () const</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QString </td><td class="memItemRight" valign="bottom"><b><a href="qvaluespaceobject.html#path">path</a></b> () const</td></tr>
</table>
<hr />
<a name="public-slots"></a>
<h2>Public Slots</h2>
<table class="alignedsummary" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="qvaluespaceobject.html#removeAttribute">removeAttribute</a></b> ( const QString &amp; <i>attribute</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="qvaluespaceobject.html#removeAttribute-2">removeAttribute</a></b> ( const char * <i>attribute</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="qvaluespaceobject.html#setAttribute">setAttribute</a></b> ( const QString &amp; <i>attribute</i>, const QVariant &amp; <i>data</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="qvaluespaceobject.html#setAttribute-2">setAttribute</a></b> ( const char * <i>attribute</i>, const QVariant &amp; <i>data</i> )</td></tr>
</table>
<hr />
<a name="signals"></a>
<h2>Signals</h2>
<table class="alignedsummary" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="qvaluespaceobject.html#attributeInterestChanged">attributeInterestChanged</a></b> ( const QString &amp; <i>attribute</i>, bool <i>interested</i> )</td></tr>
</table>
<hr />
<a name="static-public-members"></a>
<h2>Static Public Members</h2>
<table class="alignedsummary" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="qvaluespaceobject.html#sync">sync</a></b> ()</td></tr>
</table>
<hr />
<a name="protected-functions"></a>
<h2>Protected Functions</h2>
<table class="alignedsummary" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td class="memItemLeft" align="right" valign="top">virtual void </td><td class="memItemRight" valign="bottom"><b><a href="qvaluespaceobject.html#connectNotify">connectNotify</a></b> ( const char * <i>member</i> )</td></tr>
</table>
<a name="details"></a>
<hr />
<h2>Detailed Description</h2>
<p>The QValueSpaceObject class allows applications to add entries to the Value Space.</p>
<p>For an overview of the Qt Value Space, please see the <a href="qvaluespaceitem.html">QValueSpaceItem</a> documentation.</p>
<p>The QValueSpaceObject class allows applications to write entries into the Value Space that are automatically removed when the QValueSpaceObject is destroyed, or the application exits either cleanly or abnormally. All applications in the system will have access to the data set through QValueSpaceObject and, if desired, can be notified when the data changes.</p>
<p>Although, logically, the Value Space is a simple collection of hierarchical paths, these paths can conceptually be visualized as a set of objects with attributes. For example, rather than viewing the following list as 12 distinct Value Space paths:</p>
<pre>    /Device/Network/Interfaces/eth0/Name
    /Device/Network/Interfaces/eth0/Type
    /Device/Network/Interfaces/eth0/Status
    /Device/Network/Interfaces/eth0/BytesSent
    /Device/Network/Interfaces/eth0/BytesReceived
    /Device/Network/Interfaces/eth0/Time
    /Device/Network/Interfaces/ppp0/Name
    /Device/Network/Interfaces/ppp0/Type
    /Device/Network/Interfaces/ppp0/Status
    /Device/Network/Interfaces/ppp0/BytesSent
    /Device/Network/Interfaces/ppp0/BytesReceived
    /Device/Network/Interfaces/ppp0/Time</pre>
<p>it can be thought of as describing two Value Space objects, <tt>{ /Device/Network/Interfaces/eth0, /Device/Network/Interfaces/ppp0 }</tt>, each with the six attributes <tt>{Name, Type, Status, BytesSent, BytesReceived, Time}</tt>. The QValueSpaceObject class encapsulates this abstraction.</p>
<p>In the case of two or more applications creating an application object with overlapping attributes, only the first is visible to observers in the system. The other attributes are not discarded, but are buffered until the first releases its hold on the attribute, either by manually removing it, destroying the QValueSpaceObject or by terminating. For example:</p>
<pre>    QValueSpaceObject *object1 = new QValueSpaceObject(&quot;/Device&quot;);
    object1-&gt;setAttribute(&quot;Buttons&quot;, 2);

<span class="comment">    // QValueSpaceItem(&quot;/Device/Buttons&quot;).value() == QVariant(2)</span>

    QValueSpaceObject *object2 = new QValueSpaceObject(&quot;/Device&quot;);
    object2-&gt;setAttribute(&quot;Buttons&quot;, 3);

<span class="comment">    // QValueSpaceItem(&quot;/Device/Buttons&quot;).value() == QVariant(2)</span>

    object2-&gt;removeAttribute(&quot;Buttons&quot;);
<span class="comment">    // QValueSpaceItem(&quot;/Device/Buttons&quot;).value() == QVariant(3)</span></pre>
<p>For performance reasons the setting of and removing of attributes is buffered internally by the QValueSpaceObject and applied as a batch sometime later. Normally this occurs the next time the application enters the Qt event loop, but this behavior should not be relied upon. If an application must synchronize application objects with others, the <a href="qvaluespaceobject.html#sync">QValueSpaceObject::sync</a>() method can be used to force the application of changes. This call is generally unnecessary, and should be used sparingly to prevent unnecessary load on the system.</p>
<p><i>Note:</i> The QValueSpaceObject class is not thread safe and may only be used from an application's main thread.</p>
<p>See also <a href="qvaluespaceitem.html">QValueSpaceItem</a>.</p>
<hr />
<h2>Member Function Documentation</h2>
<h3 class="fn"><a name="QValueSpaceObject"></a>QValueSpaceObject::QValueSpaceObject ( const QString &amp; <i>path</i>, QObject * <i>parent</i> = 0 )</h3>
<p>This is an overloaded function.</p>
<p>Constructs a <a href="qvaluespaceobject.html">QValueSpaceObject</a> with the specified <i>parent</i> that publishes values under <i>path</i>. This constructor is equivalent to calling <tt>QValueSpaceItem(path.toUtf8(), parent)</tt>.</p>
<h3 class="fn"><a name="QValueSpaceObject-2"></a>QValueSpaceObject::QValueSpaceObject ( const char * <i>path</i>, QObject * <i>parent</i> = 0 )</h3>
<p>This is an overloaded function.</p>
<p>Constructs a <a href="qvaluespaceobject.html">QValueSpaceObject</a> with the specified <i>parent</i> that publishes values under <i>path</i>. This constructor is equivalent to calling <tt>QValueSpaceItem(QString(path), parent)</tt>.</p>
<h3 class="fn"><a name="QValueSpaceObject-3"></a>QValueSpaceObject::QValueSpaceObject ( const QString &amp; <i>path</i>, <a href="qvaluespace.html#LayerOption-enum">QValueSpace::LayerOptions</a> <i>filter</i>, QObject * <i>parent</i> = 0 )</h3>
<p>This is an overloaded function.</p>
<p>Constructs a <a href="qvaluespaceobject.html">QValueSpaceObject</a> with the specified <i>parent</i> that publishes values under <i>path</i>. The <i>filter</i> parameter is used to limit which layer this <a href="qvaluespaceobject.html">QValueSpaceObject</a> will access. This constructor is equivalent to calling <tt>QValueSpaceObject(path.toUtf8(), filter, parent)</tt>.</p>
<p>The constructed Value Space object will access the <a href="qabstractvaluespacelayer.html">layer</a> with the highest <a href="qabstractvaluespacelayer.html#order">order</a> that matches <i>filter</i> and for which <i>path</i> is a valid path.</p>
<p>If no suitable <a href="qabstractvaluespacelayer.html">layer</a> is found, the constructed <a href="qvaluespaceobject.html">QValueSpaceObject</a> will be unconnected.</p>
<p>See also <a href="qvaluespaceobject.html#isConnected">isConnected</a>().</p>
<h3 class="fn"><a name="QValueSpaceObject-4"></a>QValueSpaceObject::QValueSpaceObject ( const char * <i>path</i>, <a href="qvaluespace.html#LayerOption-enum">QValueSpace::LayerOptions</a> <i>filter</i>, QObject * <i>parent</i> = 0 )</h3>
<p>This is an overloaded function.</p>
<p>Constructs a <a href="qvaluespaceobject.html">QValueSpaceObject</a> with the specified <i>parent</i> that publishes values under <i>path</i>. The <i>filter</i> parameter is used to limit which layer this <a href="qvaluespaceobject.html">QValueSpaceObject</a> will access. This constructor is equivalent to calling <tt>QValueSpaceObject(QString::fromLatin1(path), filter, parent)</tt>.</p>
<p>The constructed Value Space object will access the <a href="qabstractvaluespacelayer.html">layer</a> with the highest <a href="qabstractvaluespacelayer.html#order">order</a> that matches <i>filter</i> and for which <i>path</i> is a valid path.</p>
<p>If no suitable <a href="qabstractvaluespacelayer.html">layer</a> is found, the constructed <a href="qvaluespaceobject.html">QValueSpaceObject</a> will be unconnected.</p>
<p>See also <a href="qvaluespaceobject.html#isConnected">isConnected</a>().</p>
<h3 class="fn"><a name="QValueSpaceObject-5"></a>QValueSpaceObject::QValueSpaceObject ( const QString &amp; <i>path</i>, const QUuid &amp; <i>uuid</i>, QObject * <i>parent</i> = 0 )</h3>
<p>This is an overloaded function.</p>
<p>Constructs a <a href="qvaluespaceobject.html">QValueSpaceObject</a> with the specified <i>parent</i> that publishes values under <i>path</i>. Only the layer identified by <i>uuid</i> will be accessed by this object. This constructor is equivalent to calling <tt>QValueSpaceObject(path.toUtf8(), uuid, parent)</tt>.</p>
<p>Use of this constructor is not platform agnostic. If possible use one of the constructors that take a QAbstractValueSpaceLayer::LayerOptions parameter instead.</p>
<p>If a layer with a matching <i>uuid</i> is not found, the constructed <a href="qvaluespaceobject.html">QValueSpaceObject</a> will be unconnected.</p>
<p>See also <a href="qvaluespaceobject.html#isConnected">isConnected</a>().</p>
<h3 class="fn"><a name="QValueSpaceObject-6"></a>QValueSpaceObject::QValueSpaceObject ( const char * <i>path</i>, const QUuid &amp; <i>uuid</i>, QObject * <i>parent</i> = 0 )</h3>
<p>This is an overloaded function.</p>
<p>Constructs a <a href="qvaluespaceobject.html">QValueSpaceObject</a> with the specified <i>parent</i> that publishes values under <i>path</i>. Only the layer identified by <i>uuid</i> will be accessed by this object. This constructor is equivalent to calling <tt>QValueSpaceObject(QString(path), uuid, parent)</tt>.</p>
<p>Use of this constructor is not platform agnostic. If possible use one of the constructors that take a QAbstractValueSpaceLayer::LayerOptions parameter instead.</p>
<p>If a layer with a matching <i>uuid</i> is not found, the constructed <a href="qvaluespaceobject.html">QValueSpaceObject</a> will be unconnected.</p>
<p>See also <a href="qvaluespaceobject.html#isConnected">isConnected</a>().</p>
<h3 class="fn"><a name="dtor.QValueSpaceObject"></a>QValueSpaceObject::~QValueSpaceObject ()&nbsp;&nbsp;<tt> [virtual]</tt></h3>
<p>Destroys the <a href="qvaluespaceobject.html">QValueSpaceObject</a>. This will remove the object and all its attributes from the Value Space.</p>
<h3 class="fn"><a name="attributeInterestChanged"></a>void QValueSpaceObject::attributeInterestChanged ( const QString &amp; <i>attribute</i>, bool <i>interested</i> )&nbsp;&nbsp;<tt> [signal]</tt></h3>
<p>Signal that is emitted when interest in <i>attribute</i> changes. If <i>interested</i> is true at least on <a href="qvaluespaceitem.html">QValueSpaceItem</a> is interested in the value of <i>attribute</i>.</p>
<h3 class="fn"><a name="connectNotify"></a>void QValueSpaceObject::connectNotify ( const char * <i>member</i> )&nbsp;&nbsp;<tt> [virtual protected]</tt></h3>
<p>Registers this <a href="qvaluespaceobject.html">QValueSpaceObject</a> for notifications when requests to set or remove value space items under objectPath() are received by the underlying <a href="qabstractvaluespacelayer.html">QAbstractValueSpaceLayer</a>.</p>
<p>Generally you do not need to call this function as it is automatically called when connections are made to this classes signals. <i>member</i> is the signal that has been connected.</p>
<p>If you reimplement this virtual function it is important that you call this implementation from your implementation.</p>
<p>See also <a href="qvaluespaceobject.html#attributeInterestChanged">attributeInterestChanged</a>().</p>
<h3 class="fn"><a name="isConnected"></a>bool QValueSpaceObject::isConnected () const</h3>
<p>Returns true if this <a href="qvaluespaceobject.html">QValueSpaceObject</a> is connected to an available layer; otherwise returns false.</p>
<h3 class="fn"><a name="path"></a>QString QValueSpaceObject::path () const</h3>
<p>Returns the path that this <a href="qvaluespaceobject.html">QValueSpaceObject</a> refers to.</p>
<h3 class="fn"><a name="removeAttribute"></a>void QValueSpaceObject::removeAttribute ( const QString &amp; <i>attribute</i> )&nbsp;&nbsp;<tt> [slot]</tt></h3>
<p>Removes the object <i>attribute</i> and all sub-attributes from the system.</p>
<p>For example:</p>
<pre>    QValueSpaceObject object(&quot;/Device&quot;);
    object.setAttribute(&quot;State&quot;, &quot;Starting&quot;);
    object.setAttribute(&quot;State/Memory&quot;, &quot;1000&quot;);
    object.sync();
<span class="comment">    // QValueSpaceItem(&quot;/Device/State&quot;).value() == QVariant(&quot;Starting&quot;)</span>
<span class="comment">    // QValueSpaceItem(&quot;/Device/State/Memory&quot;).value() == QVariant(&quot;1000&quot;)</span>

    object.removeAttribute(&quot;State&quot;);
    object.sync();
<span class="comment">    // QValueSpaceItem(&quot;/Device/State&quot;).value() == QVariant();</span>
<span class="comment">    // QValueSpaceItem(&quot;/Device/State/Memory&quot;).value() == QVariant();</span></pre>
<h3 class="fn"><a name="removeAttribute-2"></a>void QValueSpaceObject::removeAttribute ( const char * <i>attribute</i> )&nbsp;&nbsp;<tt> [slot]</tt></h3>
<p>This is an overloaded function.</p>
<p>This is a convenience overload and is equivalent to <tt>removeAttribute(QString(attribute))</tt>.</p>
<h3 class="fn"><a name="setAttribute"></a>void QValueSpaceObject::setAttribute ( const QString &amp; <i>attribute</i>, const QVariant &amp; <i>data</i> )&nbsp;&nbsp;<tt> [slot]</tt></h3>
<p>Set an <i>attribute</i> on the object to <i>data</i>. If attribute is empty, this call will set the object's value.</p>
<p>For example:</p>
<pre>    QValueSpaceObject object(&quot;/Device&quot;);
    object.setAttribute(&quot;State&quot;, &quot;Starting&quot;);
    object.sync();

<span class="comment">    // QValueSpaceItem(&quot;/Device/State&quot;).value() == QVariant(&quot;Starting&quot;)</span></pre>
<h3 class="fn"><a name="setAttribute-2"></a>void QValueSpaceObject::setAttribute ( const char * <i>attribute</i>, const QVariant &amp; <i>data</i> )&nbsp;&nbsp;<tt> [slot]</tt></h3>
<p>This is an overloaded function.</p>
<p>This is a convenience overload and is equivalent to <tt>setAttribute(QString(attribute), data)</tt>.</p>
<h3 class="fn"><a name="sync"></a>void QValueSpaceObject::sync ()&nbsp;&nbsp;<tt> [static]</tt></h3>
<p>Forcibly sync all Value Space objects.</p>
<p>For performance reasons attribute changes are batched internally by <a href="qvaluespaceobject.html">QValueSpaceObject</a> instances. In cases where the visibility of changes must be synchronized with other processes, calling QValueSpaceObject::sync() will flush these batches. By the time sync() returns, all other processes in the system will be able to see the attribute changes.</p>
<p>In the common asynchronous case, calling sync() is unnecessary.</p>
<p /><address><hr /><div align="center">
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td align="left">Copyright &copy; 2009 Nokia Corporation and/or its subsidiary(-ies)</td>
<td align="right"><div align="right">Qt Context Framework</div></td>
</tr></table></div></address></body>
</html>
