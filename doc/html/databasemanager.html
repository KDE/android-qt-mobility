<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!-- databasemanager_s60.cpp -->
<head>
  <title>DatabaseManager Class Reference</title>
  <link href="classic.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><img src="images/qtlogo.png" align="left" border="0" /></td>
<td width="1">&nbsp;&nbsp;</td><td class="postheader" valign="center"><a href="index.html"><font color="#004faf">Home</font></a></td>
<td align="right" valign="top" width="230"><img src="images/codeless.png"  border="0" /></td></tr></table><h1 class="title">DatabaseManager Class Reference</h1>
<p>The database manager is responsible for receiving queries about services and managing user and system scope databases in order to respond to those queries. <a href="#details">More...</a></p>
<pre>    #include &lt;DatabaseManager&gt;</pre><p>Inherits <a href="http://qt.nokia.com/doc/4.5/qobject.html">QObject</a>.</p>
<ul>
<li><a href="databasemanager-members.html">List of all members, including inherited members</a></li>
</ul>
<hr />
<a name="public-types"></a>
<h2>Public Types</h2>
<table class="alignedsummary" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td class="memItemLeft" align="right" valign="top">enum </td><td class="memItemRight" valign="bottom"><b><a href="databasemanager.html#DbScope-enum">DbScope</a></b> { UserScope, SystemScope, UserOnlyScope }</td></tr>
</table>
<hr />
<a name="public-functions"></a>
<h2>Public Functions</h2>
<table class="alignedsummary" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td class="memItemLeft" align="right" valign="top"></td><td class="memItemRight" valign="bottom"><b><a href="databasemanager.html#DatabaseManager">DatabaseManager</a></b> ( void )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual </td><td class="memItemRight" valign="bottom"><b><a href="databasemanager.html#dtor.DatabaseManager">~DatabaseManager</a></b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QList&lt;QServiceInterfaceDescriptor&gt; </td><td class="memItemRight" valign="bottom"><b><a href="databasemanager.html#getInterfaces">getInterfaces</a></b> ( const QServiceFilter &amp; <i>filter</i>, DbScope <i>scope</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QStringList </td><td class="memItemRight" valign="bottom"><b><a href="databasemanager.html#getServiceNames">getServiceNames</a></b> ( const QString &amp; <i>interfaceName</i>, DbScope <i>scope</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QServiceInterfaceDescriptor </td><td class="memItemRight" valign="bottom"><b><a href="databasemanager.html#interfaceDefault">interfaceDefault</a></b> ( const QString &amp; <i>interfaceName</i>, DbScope <i>scope</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">DBError </td><td class="memItemRight" valign="bottom"><b><a href="databasemanager.html#lastError">lastError</a></b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool </td><td class="memItemRight" valign="bottom"><b><a href="databasemanager.html#registerService">registerService</a></b> ( ServiceMetaDataResults &amp; <i>service</i>, DbScope <i>scope</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="databasemanager.html#setChangeNotificationsEnabled">setChangeNotificationsEnabled</a></b> ( DbScope <i>scope</i>, bool <i>enabled</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool </td><td class="memItemRight" valign="bottom"><b><a href="databasemanager.html#setInterfaceDefault">setInterfaceDefault</a></b> ( const QString &amp; <i>serviceName</i>, const QString &amp; <i>interfaceName</i>, DbScope <i>scope</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool </td><td class="memItemRight" valign="bottom"><b><a href="databasemanager.html#setInterfaceDefault-2">setInterfaceDefault</a></b> ( const QServiceInterfaceDescriptor &amp; <i>descriptor</i>, DbScope <i>scope</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool </td><td class="memItemRight" valign="bottom"><b><a href="databasemanager.html#unregisterService">unregisterService</a></b> ( const QString &amp; <i>serviceName</i>, DbScope <i>scope</i> )</td></tr>
</table>
<ul>
<li><div bar="2" class="fn"></div>29 public functions inherited from <a href="http://qt.nokia.com/doc/4.5/qobject.html#public-functions">QObject</a></li>
</ul>
<hr />
<a name="signals"></a>
<h2>Signals</h2>
<table class="alignedsummary" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="databasemanager.html#serviceAdded">serviceAdded</a></b> ( const QString &amp; <i>serviceName</i>, DatabaseManager::DbScope <i>scope</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="databasemanager.html#serviceRemoved">serviceRemoved</a></b> ( const QString &amp; <i>serviceName</i>, DatabaseManager::DbScope <i>scope</i> )</td></tr>
</table>
<ul>
<li><div bar="2" class="fn"></div>1 signal inherited from <a href="http://qt.nokia.com/doc/4.5/qobject.html#signals">QObject</a></li>
</ul>
<h3>Additional Inherited Members</h3>
<ul>
<li><div class="fn"></div>1 property inherited from <a href="http://qt.nokia.com/doc/4.5/qobject.html#properties">QObject</a></li>
<li><div class="fn"></div>1 public slot inherited from <a href="http://qt.nokia.com/doc/4.5/qobject.html#public-slots">QObject</a></li>
<li><div class="fn"></div>1 public type inherited from <a href="http://qt.nokia.com/doc/4.5/qobject.html#public-variables">QObject</a></li>
<li><div class="fn"></div>4 static public members inherited from <a href="http://qt.nokia.com/doc/4.5/qobject.html#static-public-members">QObject</a></li>
<li><div class="fn"></div>7 protected functions inherited from <a href="http://qt.nokia.com/doc/4.5/qobject.html#protected-functions">QObject</a></li>
<li><div class="fn"></div>2 protected variables inherited from <a href="http://qt.nokia.com/doc/4.5/qobject.html#protected-variables">QObject</a></li>
</ul>
<a name="details"></a>
<hr />
<h2>Detailed Description</h2>
<p>The database manager is responsible for receiving queries about services and managing user and system scope databases in order to respond to those queries.</p>
<p>The DatabaseManager provides operations for - registering and unregistering services - querying for services and interfaces - setting and getting default interface implementations</p>
<p>and provides notifications by emitting signals for added or removed services.</p>
<p>Implementation note: When one of the above operations is first invoked a connection with the appropriate database(s) is opened. This connection remains open until the DatabaseManager is destroyed.</p>
<p>If the system scope database cannot be opened when performing user scope operations. The operations are carried out as per normal but only acting on the user scope database. Each operation invokation will try to open a connection with the system scope database.</p>
<p>Terminology note: When referring to user scope regarding operations, it generally means access to both the user and system databases with the data from both combined into a single dataset. When referring to a user scope database it means the user database only.</p>
<hr />
<h2>Member Type Documentation</h2>
<h3 class="fn"><a name="DbScope-enum"></a>enum DatabaseManager::DbScope</h3>
<hr />
<h2>Member Function Documentation</h2>
<h3 class="fn"><a name="DatabaseManager"></a>DatabaseManager::DatabaseManager ( void )</h3>
<h3 class="fn"><a name="dtor.DatabaseManager"></a>DatabaseManager::~DatabaseManager ()&nbsp;&nbsp;<tt> [virtual]</tt></h3>
<p>Destructor</p>
<h3 class="fn"><a name="getInterfaces"></a><a href="http://qt.nokia.com/doc/4.5/qlist.html">QList</a>&lt;<a href="qserviceinterfacedescriptor.html">QServiceInterfaceDescriptor</a>&gt; DatabaseManager::getInterfaces ( const <a href="qservicefilter.html">QServiceFilter</a> &amp; <i>filter</i>, <a href="databasemanager.html#DbScope-enum">DbScope</a> <i>scope</i> )</h3>
<p>Retrieves a list of interface descriptors that fulfill the constraints specified by <i>filter</i> at a given <i>scope</i>.</p>
<p>The last error is set when this function is called.</p>
<h3 class="fn"><a name="getServiceNames"></a><a href="http://qt.nokia.com/doc/4.5/qstringlist.html">QStringList</a> DatabaseManager::getServiceNames ( const <a href="http://qt.nokia.com/doc/4.5/qstring.html">QString</a> &amp; <i>interfaceName</i>, <a href="databasemanager.html#DbScope-enum">DbScope</a> <i>scope</i> )</h3>
<p>Retrieves a list of the names of services that provide the interface specified by <i>interfaceName</i>.</p>
<p>The last error is set when this function is called.</p>
<h3 class="fn"><a name="interfaceDefault"></a><a href="qserviceinterfacedescriptor.html">QServiceInterfaceDescriptor</a> DatabaseManager::interfaceDefault ( const <a href="http://qt.nokia.com/doc/4.5/qstring.html">QString</a> &amp; <i>interfaceName</i>, <a href="databasemanager.html#DbScope-enum">DbScope</a> <i>scope</i> )</h3>
<p>Returns the default interface implementation descriptor for a given <i>interfaceName</i> and <i>scope</i>.</p>
<p>The last error is set when this function is called.</p>
<p>See also <a href="databasemanager.html#setInterfaceDefault">setInterfaceDefault</a>().</p>
<h3 class="fn"><a name="lastError"></a>DBError DatabaseManager::lastError ()</h3>
<h3 class="fn"><a name="registerService"></a>bool DatabaseManager::registerService ( ServiceMetaDataResults &amp; <i>service</i>, <a href="databasemanager.html#DbScope-enum">DbScope</a> <i>scope</i> )</h3>
<p>Adds the details <i>service</i> into the service database corresponding to <i>scope</i>.</p>
<p>Returns true if the operation succeeded and false otherwise. The last error is set when this function is called.</p>
<h3 class="fn"><a name="serviceAdded"></a>void DatabaseManager::serviceAdded ( const <a href="http://qt.nokia.com/doc/4.5/qstring.html">QString</a> &amp; <i>serviceName</i>, <a href="databasemanager.html#DbScope-enum">DatabaseManager::DbScope</a> <i>scope</i> )&nbsp;&nbsp;<tt> [signal]</tt></h3>
<h3 class="fn"><a name="serviceRemoved"></a>void DatabaseManager::serviceRemoved ( const <a href="http://qt.nokia.com/doc/4.5/qstring.html">QString</a> &amp; <i>serviceName</i>, <a href="databasemanager.html#DbScope-enum">DatabaseManager::DbScope</a> <i>scope</i> )&nbsp;&nbsp;<tt> [signal]</tt></h3>
<h3 class="fn"><a name="setChangeNotificationsEnabled"></a>void DatabaseManager::setChangeNotificationsEnabled ( <a href="databasemanager.html#DbScope-enum">DbScope</a> <i>scope</i>, bool <i>enabled</i> )</h3>
<p>Sets whether change notifications for added and removed services are <i>enabled</i> or not at a given <i>scope</i>.</p>
<h3 class="fn"><a name="setInterfaceDefault"></a>bool DatabaseManager::setInterfaceDefault ( const <a href="http://qt.nokia.com/doc/4.5/qstring.html">QString</a> &amp; <i>serviceName</i>, const <a href="http://qt.nokia.com/doc/4.5/qstring.html">QString</a> &amp; <i>interfaceName</i>, <a href="databasemanager.html#DbScope-enum">DbScope</a> <i>scope</i> )</h3>
<p>Sets the default interface implemenation for <i>interfaceName</i> to the matching interface implementation provided by <i>service</i>.</p>
<p>If <i>service</i> provides more than one interface implementation, the newest version of the interface is set as the default.</p>
<p>Returns true if the operation was succeeded, false otherwise The last error is set when this function is called.</p>
<p>See also <a href="databasemanager.html#interfaceDefault">interfaceDefault</a>().</p>
<h3 class="fn"><a name="setInterfaceDefault-2"></a>bool DatabaseManager::setInterfaceDefault ( const <a href="qserviceinterfacedescriptor.html">QServiceInterfaceDescriptor</a> &amp; <i>descriptor</i>, <a href="databasemanager.html#DbScope-enum">DbScope</a> <i>scope</i> )</h3>
<p>Sets the interface implementation specified by <i>descriptor</i> to be the default implementation for the particular interface specified in the descriptor.</p>
<p>Returns true if the operation succeeded, false otherwise. The last error is set when this function is called.</p>
<h3 class="fn"><a name="unregisterService"></a>bool DatabaseManager::unregisterService ( const <a href="http://qt.nokia.com/doc/4.5/qstring.html">QString</a> &amp; <i>serviceName</i>, <a href="databasemanager.html#DbScope-enum">DbScope</a> <i>scope</i> )</h3>
<p>Removes the details of <i>serviceName</i> from the database corresponding to <i>scope</i>.</p>
<p>Returns true if the operation succeeded, false otherwise. The last error is set when this function is called.</p>
<p /><address><hr /><div align="center">
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td align="left">Copyright &copy; 2009 Nokia Corporation and/or its subsidiary(-ies)</td>
<td align="right"><div align="right">Qt Mobility API</div></td>
</tr></table></div></address></body>
</html>
