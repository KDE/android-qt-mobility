<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!-- ../../location/draft-api.cpp -->
<head>
  <title>QPositionSource Class Reference</title>
  <link href="classic.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><img src="images/qtlogo.png" align="left" border="0" /></td>
<td width="1">&nbsp;&nbsp;</td><td class="postheader" valign="center"><a href="index.html"><font color="#004faf">Home</font></a></td>
<td align="right" valign="top" width="230"><img src="images/codeless.png"  border="0" /></td></tr></table><h1 class="title">QPositionSource Class Reference</h1>
<p>The QPositionSource class is an abstract base class for the distribution of positional updates. <a href="#details">More...</a></p>
<pre>    #include &lt;QPositionSource&gt;</pre><ul>
<li><a href="qpositionsource-members.html">List of all members, including inherited members</a></li>
</ul>
<a name="public-types"></a>
<h3>Public Types</h3>
<ul>
<li><div class="fn"/>enum <b><a href="qpositionsource.html#PositioningMethod-enum">PositioningMethod</a></b> { SatellitePositioningMethods, NonSatellitePositioningMethods, AllPositioningMethods }</li>
<li><div class="fn"/>flags <b><a href="qpositionsource.html#PositioningMethod-enum">PositioningMethods</a></b></li>
</ul>
<a name="public-functions"></a>
<h3>Public Functions</h3>
<ul>
<li><div class="fn"/><b><a href="qpositionsource.html#QPositionSource">QPositionSource</a></b> ( QObject * <i>parent</i> = 0 )</li>
<li><div class="fn"/>virtual QPositionUpdate <b><a href="qpositionsource.html#lastKnownPosition">lastKnownPosition</a></b> ( bool <i>fromSatellitePositioningMethodsOnly</i> = false ) const = 0</li>
<li><div class="fn"/>virtual int <b><a href="qpositionsource.html#minimumUpdateInterval">minimumUpdateInterval</a></b> () const = 0</li>
<li><div class="fn"/>PositioningMethods <b><a href="qpositionsource.html#preferredPositioningMethods">preferredPositioningMethods</a></b> () const</li>
<li><div class="fn"/>virtual void <b><a href="qpositionsource.html#setPreferredPositioningMethods">setPreferredPositioningMethods</a></b> ( PositioningMethods <i>methods</i> )</li>
<li><div class="fn"/>virtual void <b><a href="qpositionsource.html#setUpdateInterval">setUpdateInterval</a></b> ( int <i>msec</i> )</li>
<li><div class="fn"/>virtual PositioningMethods <b><a href="qpositionsource.html#supportedPositioningMethods">supportedPositioningMethods</a></b> () const = 0</li>
<li><div class="fn"/>int <b><a href="qpositionsource.html#updateInterval">updateInterval</a></b> () const</li>
</ul>
<a name="public-slots"></a>
<h3>Public Slots</h3>
<ul>
<li><div class="fn"/>virtual void <b><a href="qpositionsource.html#requestUpdate">requestUpdate</a></b> ( int <i>timeout</i> = 5000 ) = 0</li>
<li><div class="fn"/>virtual void <b><a href="qpositionsource.html#startUpdates">startUpdates</a></b> () = 0</li>
<li><div class="fn"/>virtual void <b><a href="qpositionsource.html#stopUpdates">stopUpdates</a></b> () = 0</li>
</ul>
<a name="signals"></a>
<h3>Signals</h3>
<ul>
<li><div class="fn"/>void <b><a href="qpositionsource.html#positionUpdated">positionUpdated</a></b> ( const QPositionUpdate &amp; <i>update</i> )</li>
<li><div class="fn"/>void <b><a href="qpositionsource.html#requestTimeout">requestTimeout</a></b> ()</li>
</ul>
<a name="static-public-members"></a>
<h3>Static Public Members</h3>
<ul>
<li><div class="fn"/>QPositionSource * <b><a href="qpositionsource.html#createSource">createSource</a></b> ( QObject * <i>parent</i> = 0 )</li>
</ul>
<a name="details"></a>
<hr />
<h2>Detailed Description</h2>
<p>The QPositionSource class is an abstract base class for the distribution of positional updates.</p>
<p>The static function <a href="qpositionsource.html#createSource">QPositionSource::createSource</a>() creates a default position source that is appropriate for the platform, if one is available. Otherwise, QPositionSource can be subclassed to create an appropriate custom source of position data.</p>
<p>Users of a QPositionSource subclass can request the current position using <a href="qpositionsource.html#requestUpdate">requestUpdate</a>(), or start and stop regular position updates using <a href="qpositionsource.html#startUpdates">startUpdates</a>() and <a href="qpositionsource.html#stopUpdates">stopUpdates</a>(). When an update is available, positionUpdate() is emitted. The last known position can be accessed with lastUpdate().</p>
<p>If regular position updates are required, <a href="qpositionsource.html#setUpdateInterval">setUpdateInterval</a>() can be used to specify how often these updates should be emitted. (If no interval is specified, updates are simply provided whenever they are available.) For example:</p>
<pre><span class="comment">    // Emit updates every 10 seconds if available</span>
    QPositionSource *source = QPositionSource::createSource();
    source-&gt;setUpdateInterval(10000);</pre>
<p>To remove an update interval that was previously set, call <a href="qpositionsource.html#setUpdateInterval">setUpdateInterval</a>() with a value of 0.</p>
<p>Note that the position source may have a minimum value requirement for update intervals, as returned by minimumIntervalForType().</p>
<hr />
<h2>Member Type Documentation</h2>
<h3 class="flags"><a name="PositioningMethod-enum"></a>enum QPositionSource::PositioningMethod<br />flags QPositionSource::PositioningMethods</h3>
<p>Defines the types of positioning methods.</p>
<p><table border="1" cellpadding="2" cellspacing="1" width="100%">
<tr><th width="25%">Constant</th><th width="15%">Value</th><th width="60%">Description</th></tr>
<tr><td valign="top"><tt>QPositionSource::SatellitePositioningMethods</tt></td><td align="center" valign="top"><tt>0x000000ff</tt></td><td valign="top">Satellite-based positioning methods such as GPS.</td></tr>
<tr><td valign="top"><tt>QPositionSource::NonSatellitePositioningMethods</tt></td><td align="center" valign="top"><tt>0xffffff00</tt></td><td valign="top">Other positioning methods.</td></tr>
<tr><td valign="top"><tt>QPositionSource::AllPositioningMethods</tt></td><td align="center" valign="top"><tt>0xffffffff</tt></td><td valign="top">A flag that matches all positioning methods.</td></tr>
</table></p>
<p>The PositioningMethods type is a typedef for <a href="qflags.html">QFlags</a>&lt;PositioningMethod&gt;. It stores an OR combination of PositioningMethod values.</p>
<hr />
<h2>Member Function Documentation</h2>
<h3 class="fn"><a name="QPositionSource"></a>QPositionSource::QPositionSource ( QObject * <i>parent</i> = 0 )</h3>
<p>Creates a position source with the specified <i>parent</i>.</p>
<h3 class="fn"><a name="createSource"></a>QPositionSource * QPositionSource::createSource ( QObject * <i>parent</i> = 0 )&nbsp;&nbsp;<tt> [static]</tt></h3>
<p>Creates and returns a position source with the given <i>parent</i> that reads from the system's default sources of location data.</p>
<p>Returns 0 if the system has no default position source.</p>
<h3 class="fn"><a name="lastKnownPosition"></a><a href="qpositionupdate.html">QPositionUpdate</a> QPositionSource::lastKnownPosition ( bool <i>fromSatellitePositioningMethodsOnly</i> = false ) const&nbsp;&nbsp;<tt> [pure virtual]</tt></h3>
<p>Returns an update containing the last known position, or a null update if none is available.</p>
<p>If <i>fromSatellitePositioningMethodsOnly</i> is true, this returns the last known position received from a satellite positioning method, and if none is available, a null update is returned.</p>
<h3 class="fn"><a name="minimumUpdateInterval"></a>int QPositionSource::minimumUpdateInterval () const&nbsp;&nbsp;<tt> [pure virtual]</tt></h3>
<p>Returns the minimum value accepted by <a href="qpositionsource.html#setUpdateInterval">setUpdateInterval</a>().</p>
<h3 class="fn"><a name="positionUpdated"></a>void QPositionSource::positionUpdated ( const <a href="qpositionupdate.html">QPositionUpdate</a> &amp; <i>update</i> )&nbsp;&nbsp;<tt> [signal]</tt></h3>
<p>If <a href="qpositionsource.html#startUpdates">startUpdates</a>() or <a href="qpositionsource.html#requestUpdate">requestUpdate</a>() is called, this signal is emitted when an update becomes available.</p>
<p>The <i>update</i> value holds the value of the new update.</p>
<h3 class="fn"><a name="preferredPositioningMethods"></a><a href="qpositionsource.html#PositioningMethod-enum">PositioningMethods</a> QPositionSource::preferredPositioningMethods () const</h3>
<p>Returns the positioning methods set by <a href="qpositionsource.html#setPreferredPositioningMethods">setPreferredPositioningMethods</a>().</p>
<p>See also <a href="qpositionsource.html#setPreferredPositioningMethods">setPreferredPositioningMethods</a>().</p>
<h3 class="fn"><a name="requestTimeout"></a>void QPositionSource::requestTimeout ()&nbsp;&nbsp;<tt> [signal]</tt></h3>
<p>Emitted if <a href="qpositionsource.html#requestUpdate">requestUpdate</a>() was called and the current position could not be retrieved within the specified timeout.</p>
<h3 class="fn"><a name="requestUpdate"></a>void QPositionSource::requestUpdate ( int <i>timeout</i> = 5000 )&nbsp;&nbsp;<tt> [pure virtual slot]</tt></h3>
<p>Attempts to get the current position and emit <a href="qpositionsource.html#positionUpdated">positionUpdated</a>() with this information. This is useful if you do not need the regular updates provided by <a href="qpositionsource.html#startUpdates">startUpdates</a>(). If the current position cannot be found within the given <i>timeout</i> (in milliseconds), <a href="qpositionsource.html#requestTimeout">requestTimeout</a>() is emitted.</p>
<p>This does nothing if another update request is in progress. However it can be called even if <a href="qpositionsource.html#startUpdates">startUpdates</a>() has already been called and regular updates are in progress.</p>
<p>If the source uses multiple positioning methods, it tries to gets the current position from the most accurate positioning method within the given timeout.</p>
<h3 class="fn"><a name="setPreferredPositioningMethods"></a>void QPositionSource::setPreferredPositioningMethods ( <a href="qpositionsource.html#PositioningMethod-enum">PositioningMethods</a> <i>methods</i> )&nbsp;&nbsp;<tt> [virtual]</tt></h3>
<p>Sets the preferred positioning methods for this source to <i>methods</i>.</p>
<p><b>Note:</b> When reimplementing this method, subclasses must call the base method implementation to ensure <a href="qpositionsource.html#preferredPositioningMethods">preferredPositioningMethods</a>() returns the correct value.</p>
<p>See also <a href="qpositionsource.html#preferredPositioningMethods">preferredPositioningMethods</a>() and <a href="qpositionsource.html#supportedPositioningMethods">supportedPositioningMethods</a>().</p>
<h3 class="fn"><a name="setUpdateInterval"></a>void QPositionSource::setUpdateInterval ( int <i>msec</i> )&nbsp;&nbsp;<tt> [virtual]</tt></h3>
<p>Sets the source to emit updates every <i>msec</i> milliseconds. If <i>msec</i> is 0, interval-based updates are disabled and the source provides updates whenever they are available.</p>
<p>If <i>msec</i> is not 0 and is less than the value returned by <a href="qpositionsource.html#minimumUpdateInterval">minimumUpdateInterval</a>(), the interval will be set to the minimum interval.</p>
<p>Note that implementations may not provide updates at the exact interval specified. For example, a given millisecond interval value may be rounded to the nearest second if the implementation does not support intervals specified to millisecond precision.</p>
<p><b>Note:</b> When reimplementing this method, subclasses must call the base method implementation to ensure <a href="qpositionsource.html#updateInterval">updateInterval</a>() returns the correct value.</p>
<p>See also <a href="qpositionsource.html#updateInterval">updateInterval</a>().</p>
<h3 class="fn"><a name="startUpdates"></a>void QPositionSource::startUpdates ()&nbsp;&nbsp;<tt> [pure virtual slot]</tt></h3>
<p>Starts emitting updates at regular intervals as specified by <a href="qpositionsource.html#setUpdateInterval">setUpdateInterval</a>().</p>
<p>If <a href="qpositionsource.html#setUpdateInterval">setUpdateInterval</a>() has not been called, the source will emit updates as soon as they become available.</p>
<h3 class="fn"><a name="stopUpdates"></a>void QPositionSource::stopUpdates ()&nbsp;&nbsp;<tt> [pure virtual slot]</tt></h3>
<p>Stops emitting updates at regular intervals.</p>
<h3 class="fn"><a name="supportedPositioningMethods"></a><a href="qpositionsource.html#PositioningMethod-enum">PositioningMethods</a> QPositionSource::supportedPositioningMethods () const&nbsp;&nbsp;<tt> [pure virtual]</tt></h3>
<p>Returns the positioning methods available to this source.</p>
<p>See also <a href="qpositionsource.html#setPreferredPositioningMethods">setPreferredPositioningMethods</a>().</p>
<h3 class="fn"><a name="updateInterval"></a>int QPositionSource::updateInterval () const</h3>
<p>Returns the interval value set by <a href="qpositionsource.html#setUpdateInterval">setUpdateInterval</a>().</p>
<p>Returns 0 if no interval has been set.</p>
<p>See also <a href="qpositionsource.html#setUpdateInterval">setUpdateInterval</a>().</p>
<p /><address><hr /><div align="center">
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td align="left">Copyright &copy; 2009 Nokia Corporation and/or its subsidiary(-ies)</td>
<td align="right"><div align="right">Location API</div></td>
</tr></table></div></address></body>
</html>
