<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!-- qmessagestore.cpp -->
<head>
  <title>Qt Mobility Project 1.0: QMessageStore Class Reference</title>
  <link href="classic.css" rel="stylesheet" type="text/css" />
</head>
<body>
<a name="//apple_ref/cpp/cl//QMessageStore" />
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><a href="http://qt.nokia.com/"><img src="images/qtlogo.png" align="left" border="0" /></a></td>
<td width="1">&nbsp;&nbsp;</td><td class="postheader" valign="center"><a href="index.html"><font color="#004faf">Home</font></a>&nbsp;&middot; <a href="classes.html"><font color="#004faf">All&nbsp;Classes</font></a>&nbsp;&middot; <a href="functions.html"><font color="#004faf">All&nbsp;Functions</font></a>&nbsp;&middot;</td>
<td align="right" valign="top" width="230"><img src="images/codeless.png"  border="0" /></td></tr></table><h1 class="title">QMessageStore Class Reference</h1>
<p>The QMessageStore class represents the main interface for storage and retrieval of messages, folders and accounts in the messaging store. <a href="#details">More...</a></p>
<pre>    #include &lt;QMessageStore&gt;</pre><p><b>This class is under development and is subject to change.</b></p>
<p>Inherits <a href="http://qt.nokia.com/doc/4.5/qobject.html">QObject</a>.</p>
<ul>
<li><a href="qmessagestore-members.html">List of all members, including inherited members</a></li>
</ul>
<hr />
<a name="public-types"></a>
<h2>Public Types</h2>
<table class="alignedsummary" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td class="memItemLeft" align="right" valign="top">enum </td><td class="memItemRight" valign="bottom"><b><a href="qmessagestore.html#ErrorCode-enum">ErrorCode</a></b> { NoError, InvalidId, ConstraintFailure, ContentInaccessible, ..., Busy }</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef </td><td class="memItemRight" valign="bottom"><b><a href="qmessagestore.html#NotificationFilterId-typedef">NotificationFilterId</a></b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef </td><td class="memItemRight" valign="bottom"><b><a href="qmessagestore.html#NotificationFilterIdSet-typedef">NotificationFilterIdSet</a></b></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum </td><td class="memItemRight" valign="bottom"><b><a href="qmessagestore.html#RemovalOption-enum">RemovalOption</a></b> { RemoveLocalCopyOnly, RemoveOnOriginatingServer }</td></tr>
</table>
<hr />
<a name="public-functions"></a>
<h2>Public Functions</h2>
<table class="alignedsummary" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td class="memItemLeft" align="right" valign="top">QMessageAccount </td><td class="memItemRight" valign="bottom"><b><a href="qmessagestore.html#account">account</a></b> ( const QMessageAccountId &amp; <i>id</i> ) const</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool </td><td class="memItemRight" valign="bottom"><b><a href="qmessagestore.html#addMessage">addMessage</a></b> ( QMessage * <i>m</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int </td><td class="memItemRight" valign="bottom"><b><a href="qmessagestore.html#countAccounts">countAccounts</a></b> ( const QMessageAccountFilter &amp; <i>filter</i> = QMessageAccountFilter() ) const</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int </td><td class="memItemRight" valign="bottom"><b><a href="qmessagestore.html#countFolders">countFolders</a></b> ( const QMessageFolderFilter &amp; <i>filter</i> = QMessageFolderFilter() ) const</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int </td><td class="memItemRight" valign="bottom"><b><a href="qmessagestore.html#countMessages">countMessages</a></b> ( const QMessageFilter &amp; <i>filter</i> = QMessageFilter() ) const</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QMessageFolder </td><td class="memItemRight" valign="bottom"><b><a href="qmessagestore.html#folder">folder</a></b> ( const QMessageFolderId &amp; <i>id</i> ) const</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QMessageStore::ErrorCode </td><td class="memItemRight" valign="bottom"><b><a href="qmessagestore.html#lastError">lastError</a></b> () const</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QMessage </td><td class="memItemRight" valign="bottom"><b><a href="qmessagestore.html#message">message</a></b> ( const QMessageId &amp; <i>id</i> ) const</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QMessageAccountIdList </td><td class="memItemRight" valign="bottom"><b><a href="qmessagestore.html#queryAccounts">queryAccounts</a></b> ( const QMessageAccountFilter &amp; <i>filter</i> = QMessageAccountFilter(), const QMessageAccountOrdering &amp; <i>ordering</i> = QMessageAccountOrdering(), uint <i>limit</i> = 0, uint <i>offset</i> = 0 ) const</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QMessageFolderIdList </td><td class="memItemRight" valign="bottom"><b><a href="qmessagestore.html#queryFolders">queryFolders</a></b> ( const QMessageFolderFilter &amp; <i>filter</i> = QMessageFolderFilter(), const QMessageFolderOrdering &amp; <i>ordering</i> = QMessageFolderOrdering(), uint <i>limit</i> = 0, uint <i>offset</i> = 0 ) const</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QMessageIdList </td><td class="memItemRight" valign="bottom"><b><a href="qmessagestore.html#queryMessages">queryMessages</a></b> ( const QMessageFilter &amp; <i>filter</i> = QMessageFilter(), const QMessageOrdering &amp; <i>ordering</i> = QMessageOrdering(), uint <i>limit</i> = 0, uint <i>offset</i> = 0 ) const</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QMessageIdList </td><td class="memItemRight" valign="bottom"><b><a href="qmessagestore.html#queryMessages-2">queryMessages</a></b> ( const QMessageFilter &amp; <i>filter</i>, const QString &amp; <i>body</i>, QMessageDataComparator::Options <i>options</i> = 0, const QMessageOrdering &amp; <i>ordering</i> = QMessageOrdering(), uint <i>limit</i> = 0, uint <i>offset</i> = 0 ) const</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">NotificationFilterId </td><td class="memItemRight" valign="bottom"><b><a href="qmessagestore.html#registerNotificationFilter">registerNotificationFilter</a></b> ( const QMessageFilter &amp; <i>filter</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool </td><td class="memItemRight" valign="bottom"><b><a href="qmessagestore.html#removeMessage">removeMessage</a></b> ( const QMessageId &amp; <i>id</i>, RemovalOption <i>option</i> = RemoveOnOriginatingServer )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool </td><td class="memItemRight" valign="bottom"><b><a href="qmessagestore.html#removeMessages">removeMessages</a></b> ( const QMessageFilter &amp; <i>filter</i>, RemovalOption <i>option</i> = RemoveOnOriginatingServer )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="qmessagestore.html#unregisterNotificationFilter">unregisterNotificationFilter</a></b> ( NotificationFilterId <i>notificationFilterId</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">bool </td><td class="memItemRight" valign="bottom"><b><a href="qmessagestore.html#updateMessage">updateMessage</a></b> ( QMessage * <i>m</i> )</td></tr>
</table>
<ul>
<li><div bar="2" class="fn"></div>29 public functions inherited from <a href="http://qt.nokia.com/doc/4.5/qobject.html#public-functions">QObject</a></li>
</ul>
<hr />
<a name="signals"></a>
<h2>Signals</h2>
<table class="alignedsummary" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="qmessagestore.html#messageAdded">messageAdded</a></b> ( const QMessageId &amp; <i>id</i>, const QMessageStore::NotificationFilterIdSet &amp; <i>matchingFilterIds</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="qmessagestore.html#messageRemoved">messageRemoved</a></b> ( const QMessageId &amp; <i>id</i>, const QMessageStore::NotificationFilterIdSet &amp; <i>matchingFilterIds</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="qmessagestore.html#messageUpdated">messageUpdated</a></b> ( const QMessageId &amp; <i>id</i>, const QMessageStore::NotificationFilterIdSet &amp; <i>matchingFilterIds</i> )</td></tr>
</table>
<ul>
<li><div bar="2" class="fn"></div>1 signal inherited from <a href="http://qt.nokia.com/doc/4.5/qobject.html#signals">QObject</a></li>
</ul>
<hr />
<a name="static-public-members"></a>
<h2>Static Public Members</h2>
<table class="alignedsummary" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td class="memItemLeft" align="right" valign="top">QMessageStore * </td><td class="memItemRight" valign="bottom"><b><a href="qmessagestore.html#instance">instance</a></b> ()</td></tr>
</table>
<ul>
<li><div bar="2" class="fn"></div>4 static public members inherited from <a href="http://qt.nokia.com/doc/4.5/qobject.html#static-public-members">QObject</a></li>
</ul>
<h3>Additional Inherited Members</h3>
<ul>
<li><div class="fn"></div>1 property inherited from <a href="http://qt.nokia.com/doc/4.5/qobject.html#properties">QObject</a></li>
<li><div class="fn"></div>1 public slot inherited from <a href="http://qt.nokia.com/doc/4.5/qobject.html#public-slots">QObject</a></li>
<li><div class="fn"></div>1 public type inherited from <a href="http://qt.nokia.com/doc/4.5/qobject.html#public-variables">QObject</a></li>
<li><div class="fn"></div>7 protected functions inherited from <a href="http://qt.nokia.com/doc/4.5/qobject.html#protected-functions">QObject</a></li>
<li><div class="fn"></div>2 protected variables inherited from <a href="http://qt.nokia.com/doc/4.5/qobject.html#protected-variables">QObject</a></li>
</ul>
<a name="details"></a>
<hr />
<h2>Detailed Description</h2>
<p>The QMessageStore class represents the main interface for storage and retrieval of messages, folders and accounts in the messaging store.</p>
<p>The QMessageStore class is accessed through a singleton interface and provides functions for adding, updating and deleting messages in the messaging store.</p>
<p>QMessageStore provides the <a href="qmessagestore.html#countFolders">countFolders</a>() and <a href="qmessagestore.html#queryFolders">queryFolders</a>() functions for counting and listing the folders contained by the messaging store, and the <a href="qmessagestore.html#countAccounts">countAccounts</a>() and <a href="qmessagestore.html#queryAccounts">queryAccounts</a>() functions for counting and listing the accounts contained by the store. These functions use the <a href="qmessagefolderfilter.html">QMessageFolderFilter</a> and <a href="qmessagefolderordering.html">QMessageFolderOrdering</a> classes, and the <a href="qmessageaccountfilter.html">QMessageAccountFilter</a> and <a href="qmessageaccountordering.html">QMessageAccountOrdering</a> classes to constrain their searches.</p>
<p>QMessageStore also implements functionality allowing the messages contained by the store to be counted or listed, using various filtering and ordering constraints. Clients can access this functionality via the <a href="qmessageserviceaction.html#countMessages">countMessages</a> and <a href="qmessageserviceaction.html#queryMessages">queryMessages</a> functions of the <a href="qmessageserviceaction.html">QMessageServiceAction</a> class.</p>
<p>With the exception of Windows mobile and desktop platforms, QMessageStore functions should not initiate network activity. Instead functions are restricted to operating on data already on the device. See <a href="qmessageserviceaction.html">QMessageServiceAction</a> for functions related to initiating network activity.</p>
<p>If a QMessageStore operation fails, the <a href="qmessagestore.html#lastError">lastError</a>() function will return an error code value indicating the failure mode encountered. A successful operation will set the <a href="qmessagestore.html#lastError">lastError</a>() result to <a href="qmessagestore.html#ErrorCode-enum">QMessageStore::NoError</a>.</p>
<p>Messages in the messaging store are identified by <a href="qmessageid.html">QMessageId</a> objects. The data associated with a message is retrieved in the form of a <a href="qmessage.html">QMessage</a> object using <a href="qmessagestore.html#message">message</a>(). Likewise a folder is retrieved in the form of a <a href="qmessagefolder.html">QMessageFolder</a> object using <a href="qmessagestore.html#folder">folder</a>(), and an account is retrieved in the form of a <a href="qmessageaccount.html">QMessageAccount</a> object using <a href="qmessagestore.html#account">account</a>().</p>
<p>Messages can be inserted into the store using the <a href="qmessagestore.html#addMessage">addMessage</a>() function, messages in the store can be manipulated via the <a href="qmessagestore.html#updateMessage">updateMessage</a>() function ,and removed by the <a href="qmessagestore.html#removeMessage">removeMessage</a>() functions.</p>
<p>Messaging store manipulations involving messages are reported via the messagesAdded(), messagesUpdated() and messagesRemoved() signals.</p>
<p>See also <a href="qmessage.html">QMessage</a>, <a href="qmessageid.html">QMessageId</a>, <a href="qmessagecontentcontainerid.html">QMessageContentContainerId</a>, and <a href="qmessageserviceaction.html">QMessageServiceAction</a>.</p>
<hr />
<h2>Member Type Documentation</h2>
<a name="//apple_ref/cpp/tag/QMessageStore/ErrorCode" />
<a name="//apple_ref/cpp/econst/QMessageStore/NoError" />
<a name="//apple_ref/cpp/econst/QMessageStore/InvalidId" />
<a name="//apple_ref/cpp/econst/QMessageStore/ConstraintFailure" />
<a name="//apple_ref/cpp/econst/QMessageStore/ContentInaccessible" />
<a name="//apple_ref/cpp/econst/QMessageStore/NotYetImplemented" />
<a name="//apple_ref/cpp/econst/QMessageStore/FrameworkFault" />
<a name="//apple_ref/cpp/econst/QMessageStore/WorkingMemoryOverflow" />
<a name="//apple_ref/cpp/econst/QMessageStore/Busy" />
<h3 class="fn"><a name="ErrorCode-enum"></a>enum QMessageStore::ErrorCode</h3>
<p>Defines the result of attempting to perform a messaging store operation.</p>
<p><table class="valuelist" border="1" cellpadding="2" cellspacing="1" width="100%">
<tr><th width="25%">Constant</th><th width="15%">Value</th><th width="60%">Description</th></tr>
<tr><td valign="top"><tt>QMessageStore::NoError</tt></td><td align="center" valign="top"><tt>0</tt></td><td valign="top">The operation was successfully performed.</td></tr>
<tr><td valign="top"><tt>QMessageStore::InvalidId</tt></td><td align="center" valign="top"><tt>1</tt></td><td valign="top">The operation failed due to the specification of an invalid identifier.</td></tr>
<tr><td valign="top"><tt>QMessageStore::ConstraintFailure</tt></td><td align="center" valign="top"><tt>2</tt></td><td valign="top">The operation failed due to a constraint violation.</td></tr>
<tr><td valign="top"><tt>QMessageStore::ContentInaccessible</tt></td><td align="center" valign="top"><tt>3</tt></td><td valign="top">The operation failed because the content data cannot be accessed by the messaging store.</td></tr>
<tr><td valign="top"><tt>QMessageStore::NotYetImplemented</tt></td><td align="center" valign="top"><tt>4</tt></td><td valign="top">The operation failed because the messaging store does not yet implement the operation.</td></tr>
<tr><td valign="top"><tt>QMessageStore::FrameworkFault</tt></td><td align="center" valign="top"><tt>5</tt></td><td valign="top">The operation failed because the messaging store encountered an error in performing the operation.</td></tr>
<tr><td valign="top"><tt>QMessageStore::WorkingMemoryOverflow</tt></td><td align="center" valign="top"><tt>6</tt></td><td valign="top">The operation failed because the messaging store exhausted all memory available for evaluating queries.</td></tr>
<tr><td valign="top"><tt>QMessageStore::Busy</tt></td><td align="center" valign="top"><tt>7</tt></td><td valign="top">The operation failed because the messaging store is being used by another thread.</td></tr>
</table></p>
<a name="//apple_ref/cpp/tdef/QMessageStore/NotificationFilterId" />
<h3 class="fn"><a name="NotificationFilterId-typedef"></a>typedef QMessageStore::NotificationFilterId</h3>
<p>This type contains a value identifying a registered message filter.</p>
<a name="//apple_ref/cpp/tdef/QMessageStore/NotificationFilterIdSet" />
<h3 class="fn"><a name="NotificationFilterIdSet-typedef"></a>typedef QMessageStore::NotificationFilterIdSet</h3>
<p>This type contains a set of values identifying registered message filters.</p>
<a name="//apple_ref/cpp/tag/QMessageStore/RemovalOption" />
<a name="//apple_ref/cpp/econst/QMessageStore/RemoveLocalCopyOnly" />
<a name="//apple_ref/cpp/econst/QMessageStore/RemoveOnOriginatingServer" />
<h3 class="fn"><a name="RemovalOption-enum"></a>enum QMessageStore::RemovalOption</h3>
<p>Defines whether or not a message will be removed from the originating server.</p>
<p><table class="valuelist" border="1" cellpadding="2" cellspacing="1" width="100%">
<tr><th width="25%">Constant</th><th width="15%">Value</th><th width="60%">Description</th></tr>
<tr><td valign="top"><tt>QMessageStore::RemoveLocalCopyOnly</tt></td><td align="center" valign="top"><tt>1</tt></td><td valign="top">Do not remove the message from the originating server.</td></tr>
<tr><td valign="top"><tt>QMessageStore::RemoveOnOriginatingServer</tt></td><td align="center" valign="top"><tt>2</tt></td><td valign="top">Remove the message both from the local store and from the originating server if any.</td></tr>
</table></p>
<hr />
<h2>Member Function Documentation</h2>
<a name="//apple_ref/cpp/instm/QMessageStore/account" />
<h3 class="fn"><a name="account"></a><a href="qmessageaccount.html">QMessageAccount</a> QMessageStore::account ( const <a href="qmessageaccountid.html">QMessageAccountId</a> &amp; <i>id</i> ) const</h3>
<p>Returns the <a href="qmessageaccount.html">QMessageAccount</a> identified by <i>id</i> from the store.</p>
<a name="//apple_ref/cpp/instm/QMessageStore/addMessage" />
<h3 class="fn"><a name="addMessage"></a>bool QMessageStore::addMessage ( <a href="qmessage.html">QMessage</a> * <i>m</i> )</h3>
<p>Updates the existing <a href="qmessage.html">QMessage</a> <i>m</i> on the messaging store. Returns <tt>true</tt> if the operation successfully updates the store; otherwise returns <tt>false</tt>.</p>
<p>To ensure the change is propagated to any affected external server <a href="qmessageserviceaction.html#exportUpdates">QMessageServiceAction::exportUpdates</a>() should be subsequently called.</p>
<p>See also <a href="qmessagestore.html#message">message</a>(), <a href="qmessagestore.html#updateMessage">updateMessage</a>(), <a href="qmessagestore.html#removeMessage">removeMessage</a>(), and <a href="qmessageserviceaction.html#exportUpdates">QMessageServiceAction::exportUpdates</a>().</p>
<a name="//apple_ref/cpp/instm/QMessageStore/countAccounts" />
<h3 class="fn"><a name="countAccounts"></a>int QMessageStore::countAccounts ( const <a href="qmessageaccountfilter.html">QMessageAccountFilter</a> &amp; <i>filter</i> = QMessageAccountFilter() ) const</h3>
<p>Returns the number of messages which match the filtering criteria defined in <a href="qmessageaccountfilter.html">QMessageAccountFilter</a> <i>filter</i>. If filter is empty a count of all messages is returned.</p>
<p>See also <a href="qmessagestore.html#lastError">lastError</a>() and <a href="qmessagestore.html#queryAccounts">queryAccounts</a>().</p>
<a name="//apple_ref/cpp/instm/QMessageStore/countFolders" />
<h3 class="fn"><a name="countFolders"></a>int QMessageStore::countFolders ( const <a href="qmessagefolderfilter.html">QMessageFolderFilter</a> &amp; <i>filter</i> = QMessageFolderFilter() ) const</h3>
<p>Returns the number of messages which match the filtering criteria defined in <a href="qmessagefolderfilter.html">QMessageFolderFilter</a> <i>filter</i>. If filter is empty a count of all messages is returned.</p>
<p>See also <a href="qmessagestore.html#lastError">lastError</a>() and <a href="qmessagestore.html#queryFolders">queryFolders</a>().</p>
<a name="//apple_ref/cpp/instm/QMessageStore/countMessages" />
<h3 class="fn"><a name="countMessages"></a>int QMessageStore::countMessages ( const <a href="qmessagefilter.html">QMessageFilter</a> &amp; <i>filter</i> = QMessageFilter() ) const</h3>
<p>Returns the number of messages which match the filtering criteria defined in <a href="qmessagefilter.html">QMessageFilter</a> <i>filter</i>. If filter is empty a count of all messages is returned.</p>
<p>See also <a href="qmessagestore.html#lastError">lastError</a>() and <a href="qmessagestore.html#queryMessages">queryMessages</a>().</p>
<a name="//apple_ref/cpp/instm/QMessageStore/folder" />
<h3 class="fn"><a name="folder"></a><a href="qmessagefolder.html">QMessageFolder</a> QMessageStore::folder ( const <a href="qmessagefolderid.html">QMessageFolderId</a> &amp; <i>id</i> ) const</h3>
<p>Returns the <a href="qmessagefolder.html">QMessageFolder</a> identified by <i>id</i> from the store.</p>
<a name="//apple_ref/cpp/clm/QMessageStore/instance" />
<h3 class="fn"><a name="instance"></a>QMessageStore * QMessageStore::instance ()&nbsp;&nbsp;<tt> [static]</tt></h3>
<p>Returns the single instance of the <a href="qmessagestore.html">QMessageStore</a> class.</p>
<p>If necessary, the store will be instantiated and initialized.</p>
<a name="//apple_ref/cpp/instm/QMessageStore/lastError" />
<h3 class="fn"><a name="lastError"></a><a href="qmessagestore.html#ErrorCode-enum">QMessageStore::ErrorCode</a> QMessageStore::lastError () const</h3>
<p>Returns the code of the last error condition reported by the messaging store.</p>
<a name="//apple_ref/cpp/instm/QMessageStore/message" />
<h3 class="fn"><a name="message"></a><a href="qmessage.html">QMessage</a> QMessageStore::message ( const <a href="qmessageid.html">QMessageId</a> &amp; <i>id</i> ) const</h3>
<p>Returns the <a href="qmessage.html">QMessage</a> identified by <i>id</i> from the store.</p>
<a name="//apple_ref/cpp/instm/QMessageStore/messageAdded" />
<h3 class="fn"><a name="messageAdded"></a>void QMessageStore::messageAdded ( const <a href="qmessageid.html">QMessageId</a> &amp; <i>id</i>, const <a href="qmessagestore.html#NotificationFilterIdSet-typedef">QMessageStore::NotificationFilterIdSet</a> &amp; <i>matchingFilterIds</i> )&nbsp;&nbsp;<tt> [signal]</tt></h3>
<p>Signal that is emitted when the message identified by <i>id</i> is added to the message store. <i>matchingFilterIds</i> contains a set of values identifiying registered notification filters that matched the message.</p>
<p>See also <a href="qmessagestore.html#messageRemoved">messageRemoved</a>(), <a href="qmessagestore.html#messageUpdated">messageUpdated</a>(), and <a href="qmessagestore.html#registerNotificationFilter">registerNotificationFilter</a>().</p>
<a name="//apple_ref/cpp/instm/QMessageStore/messageRemoved" />
<h3 class="fn"><a name="messageRemoved"></a>void QMessageStore::messageRemoved ( const <a href="qmessageid.html">QMessageId</a> &amp; <i>id</i>, const <a href="qmessagestore.html#NotificationFilterIdSet-typedef">QMessageStore::NotificationFilterIdSet</a> &amp; <i>matchingFilterIds</i> )&nbsp;&nbsp;<tt> [signal]</tt></h3>
<p>Signal that is emitted when the message identified by <i>id</i> is removed from the message store. <i>matchingFilterIds</i> contains a set of values identifiying registered notification filters that matched the message.</p>
<p>Since the filters apply to the state of the data after the message removal, the only data item that may be subject to filtration is the identifier of the removed message.</p>
<p>See also <a href="qmessagestore.html#messageAdded">messageAdded</a>(), <a href="qmessagestore.html#messageUpdated">messageUpdated</a>(), and <a href="qmessagestore.html#registerNotificationFilter">registerNotificationFilter</a>().</p>
<a name="//apple_ref/cpp/instm/QMessageStore/messageUpdated" />
<h3 class="fn"><a name="messageUpdated"></a>void QMessageStore::messageUpdated ( const <a href="qmessageid.html">QMessageId</a> &amp; <i>id</i>, const <a href="qmessagestore.html#NotificationFilterIdSet-typedef">QMessageStore::NotificationFilterIdSet</a> &amp; <i>matchingFilterIds</i> )&nbsp;&nbsp;<tt> [signal]</tt></h3>
<p>Signal that is emitted when the message identified by <i>id</i> is updated in the message store. <i>matchingFilterIds</i> contains a set of values identifiying registered notification filters that matched the message.</p>
<p>Since the filters apply to the state of the data after the message modification, updates to messages which matched a given filter prior to modification but not afterwards will not result in the emission of the messageUpdated signal.</p>
<p>See also <a href="qmessagestore.html#messageAdded">messageAdded</a>(), <a href="qmessagestore.html#messageRemoved">messageRemoved</a>(), and <a href="qmessagestore.html#registerNotificationFilter">registerNotificationFilter</a>().</p>
<a name="//apple_ref/cpp/instm/QMessageStore/queryAccounts" />
<h3 class="fn"><a name="queryAccounts"></a>QMessageAccountIdList QMessageStore::queryAccounts ( const <a href="qmessageaccountfilter.html">QMessageAccountFilter</a> &amp; <i>filter</i> = QMessageAccountFilter(), const <a href="qmessageaccountordering.html">QMessageAccountOrdering</a> &amp; <i>ordering</i> = QMessageAccountOrdering(), <a href="http://qt.nokia.com/doc/4.5/qtglobal.html#uint-typedef">uint</a> <i>limit</i> = 0, <a href="http://qt.nokia.com/doc/4.5/qtglobal.html#uint-typedef">uint</a> <i>offset</i> = 0 ) const</h3>
<p>Returns the <a href="qmessageaccountid.html">QMessageAccountId</a>s of accounts in the messaging store. If <i>filter</i> is not empty only accounts matching the parameters set by <i>filter</i> will be returned, otherwise identifiers for all accounts will be returned. If <i>ordering</i> is not empty, then the identifiers will be sorted by the parameters set by <i>ordering</i>. If <i>limit</i> is not zero, then <i>limit</i> places an upper bound on the number of ids in the list returned. <i>offset</i> specifies how many ids to skip at the beginning of the list returned.</p>
<p>See also <a href="qmessagestore.html#lastError">lastError</a>() and <a href="qmessagestore.html#countAccounts">countAccounts</a>().</p>
<a name="//apple_ref/cpp/instm/QMessageStore/queryFolders" />
<h3 class="fn"><a name="queryFolders"></a>QMessageFolderIdList QMessageStore::queryFolders ( const <a href="qmessagefolderfilter.html">QMessageFolderFilter</a> &amp; <i>filter</i> = QMessageFolderFilter(), const <a href="qmessagefolderordering.html">QMessageFolderOrdering</a> &amp; <i>ordering</i> = QMessageFolderOrdering(), <a href="http://qt.nokia.com/doc/4.5/qtglobal.html#uint-typedef">uint</a> <i>limit</i> = 0, <a href="http://qt.nokia.com/doc/4.5/qtglobal.html#uint-typedef">uint</a> <i>offset</i> = 0 ) const</h3>
<p>Returns the <a href="qmessagefolderid.html">QMessageFolderId</a>s of folders in the messaging store. If <i>filter</i> is not empty only folders matching the parameters set by <i>filter</i> will be returned, otherwise identifiers for all folders will be returned. If <i>ordering</i> is not empty, then the identifiers will be sorted by the parameters set by <i>ordering</i>. If <i>limit</i> is not zero, then <i>limit</i> places an upper bound on the number of ids in the list returned. <i>offset</i> specifies how many ids to skip at the beginning of the list returned.</p>
<p>See also <a href="qmessagestore.html#lastError">lastError</a>() and <a href="qmessagestore.html#countFolders">countFolders</a>().</p>
<a name="//apple_ref/cpp/instm/QMessageStore/queryMessages" />
<h3 class="fn"><a name="queryMessages"></a>QMessageIdList QMessageStore::queryMessages ( const <a href="qmessagefilter.html">QMessageFilter</a> &amp; <i>filter</i> = QMessageFilter(), const <a href="qmessageordering.html">QMessageOrdering</a> &amp; <i>ordering</i> = QMessageOrdering(), <a href="http://qt.nokia.com/doc/4.5/qtglobal.html#uint-typedef">uint</a> <i>limit</i> = 0, <a href="http://qt.nokia.com/doc/4.5/qtglobal.html#uint-typedef">uint</a> <i>offset</i> = 0 ) const</h3>
<p>Returns the <a href="qmessageid.html">QMessageId</a>s of messages in the messaging store. If <i>filter</i> is not empty only messages matching the parameters set by <i>filter</i> will be returned, otherwise identifiers for all messages will be returned. If <i>ordering</i> is not empty, then the identifiers will be sorted by the parameters set by <i>ordering</i>. If <i>limit</i> is not zero, then <i>limit</i> places an upper bound on the number of ids in the list returned. <i>offset</i> specifies how many ids to skip at the beginning of the list returned.</p>
<p>See also <a href="qmessagestore.html#lastError">lastError</a>() and <a href="qmessagestore.html#countMessages">countMessages</a>().</p>
<h3 class="fn"><a name="queryMessages-2"></a>QMessageIdList QMessageStore::queryMessages ( const <a href="qmessagefilter.html">QMessageFilter</a> &amp; <i>filter</i>, const <a href="http://qt.nokia.com/doc/4.5/qstring.html">QString</a> &amp; <i>body</i>, <a href="qmessagedatacomparator.html#Option-enum">QMessageDataComparator::Options</a> <i>options</i> = 0, const <a href="qmessageordering.html">QMessageOrdering</a> &amp; <i>ordering</i> = QMessageOrdering(), <a href="http://qt.nokia.com/doc/4.5/qtglobal.html#uint-typedef">uint</a> <i>limit</i> = 0, <a href="http://qt.nokia.com/doc/4.5/qtglobal.html#uint-typedef">uint</a> <i>offset</i> = 0 ) const</h3>
<p>Returns the <a href="qmessageid.html">QMessageId</a>s of messages in the messaging store. If <i>filter</i> is not empty only messages matching the parameters set by <i>filter</i> and with a body containing the string <i>body</i> will be returned, otherwise identifiers for all messages with a body containing <i>body</i> will be returned. If <i>ordering</i> is not empty, then the identifiers will be sorted by the parameters set by <i>ordering</i>. If <i>limit</i> is not zero, then <i>limit</i> places an upper bound on the number of ids in the list returned. <i>offset</i> specifies how many ids to skip at the beginning of the list returned. <i>options</i> specifies the search optons to use.</p>
<p>See also <a href="qmessagestore.html#lastError">lastError</a>() and <a href="qmessagestore.html#countMessages">countMessages</a>().</p>
<a name="//apple_ref/cpp/instm/QMessageStore/registerNotificationFilter" />
<h3 class="fn"><a name="registerNotificationFilter"></a><a href="qmessagestore.html#NotificationFilterId-typedef">NotificationFilterId</a> QMessageStore::registerNotificationFilter ( const <a href="qmessagefilter.html">QMessageFilter</a> &amp; <i>filter</i> )</h3>
<p>Registers a message filter that will be used to generate <a href="qmessagestore.html#messageAdded">messageAdded</a>(), <a href="qmessagestore.html#messageRemoved">messageRemoved</a>() and <a href="qmessagestore.html#messageUpdated">messageUpdated</a>() signals. Returns an identifier value that can be used to identify the reason that a signal was emitted, and to unregister the filter at a later time.</p>
<p>The <i>filter</i> is applied to the state of the data after the occurrence of the event for which a notification may be emitted.</p>
<p>See also <a href="qmessagestore.html#unregisterNotificationFilter">unregisterNotificationFilter</a>(), <a href="qmessagestore.html#messageAdded">messageAdded</a>(), <a href="qmessagestore.html#messageRemoved">messageRemoved</a>(), and <a href="qmessagestore.html#messageUpdated">messageUpdated</a>().</p>
<a name="//apple_ref/cpp/instm/QMessageStore/removeMessage" />
<h3 class="fn"><a name="removeMessage"></a>bool QMessageStore::removeMessage ( const <a href="qmessageid.html">QMessageId</a> &amp; <i>id</i>, <a href="qmessagestore.html#RemovalOption-enum">RemovalOption</a> <i>option</i> = RemoveOnOriginatingServer )</h3>
<p>Removes the message with <a href="qmessageid.html">QMessageId</a> <i>id</i> from the messaging store. If <i>option</i> is <a href="qmessagestore.html#RemovalOption-enum">QMessageStore::RemoveOnOriginatingServer</a> then when synchronization is performed the message should be removed from both the local message store and the originating server if any.</p>
<p>Returns <tt>true</tt> if the operation successfully updates the store; otherwise returns <tt>false</tt>.</p>
<p>To ensure the change is propagated to any affected external server <a href="qmessageserviceaction.html#exportUpdates">QMessageServiceAction::exportUpdates</a>() should be subsequently called.</p>
<p><i>option</i> is ignored on Windows mobile and desktop platforms.</p>
<p>See also <a href="qmessagestore.html#removeMessages">removeMessages</a>(), <a href="qmessagestore.html#addMessage">addMessage</a>(), <a href="qmessagestore.html#updateMessage">updateMessage</a>(), and <a href="qmessageserviceaction.html#exportUpdates">QMessageServiceAction::exportUpdates</a>().</p>
<a name="//apple_ref/cpp/instm/QMessageStore/removeMessages" />
<h3 class="fn"><a name="removeMessages"></a>bool QMessageStore::removeMessages ( const <a href="qmessagefilter.html">QMessageFilter</a> &amp; <i>filter</i>, <a href="qmessagestore.html#RemovalOption-enum">RemovalOption</a> <i>option</i> = RemoveOnOriginatingServer )</h3>
<p>Removes all messages identified by the filter <i>filter</i> from the messaging store. If <i>option</i> is <a href="qmessagestore.html#RemovalOption-enum">QMessageStore::RemoveOnOriginatingServer</a> then when synchronization is performed the messages should be removed from both the local message store and the originating server if any.</p>
<p>Returns <tt>true</tt> if the operation successfully updates the store; otherwise returns <tt>false</tt>.</p>
<p>To ensure the change is propagated to any affected external server <a href="qmessageserviceaction.html#exportUpdates">QMessageServiceAction::exportUpdates</a>() should be subsequently called.</p>
<p><i>option</i> is ignored on Windows mobile and desktop platforms.</p>
<p>For example:</p>
<p>To implement a function to remove a list messages identified by QMessageIds from the messaging store.</p>
<pre>    bool removeMessages(const QMessageIdList&amp; ids)
    {
        QMessageFilter idsFilter(ids);
        return QMessageStore::instance()-&gt;removeMessages(idsFilter);
    }</pre>
<p>See also <a href="qmessagestore.html#removeMessage">removeMessage</a>(), <a href="qmessagestore.html#addMessage">addMessage</a>(), <a href="qmessagestore.html#updateMessage">updateMessage</a>(), and <a href="qmessageserviceaction.html#exportUpdates">QMessageServiceAction::exportUpdates</a>().</p>
<a name="//apple_ref/cpp/instm/QMessageStore/unregisterNotificationFilter" />
<h3 class="fn"><a name="unregisterNotificationFilter"></a>void QMessageStore::unregisterNotificationFilter ( <a href="qmessagestore.html#NotificationFilterId-typedef">NotificationFilterId</a> <i>notificationFilterId</i> )</h3>
<p>Removes the message filter associated with <i>notificationFilterId</i> from the set used to generate message event signals.</p>
<p>See also <a href="qmessagestore.html#registerNotificationFilter">registerNotificationFilter</a>(), <a href="qmessagestore.html#messageAdded">messageAdded</a>(), <a href="qmessagestore.html#messageRemoved">messageRemoved</a>(), and <a href="qmessagestore.html#messageUpdated">messageUpdated</a>().</p>
<a name="//apple_ref/cpp/instm/QMessageStore/updateMessage" />
<h3 class="fn"><a name="updateMessage"></a>bool QMessageStore::updateMessage ( <a href="qmessage.html">QMessage</a> * <i>m</i> )</h3>
<p>Updates the existing <a href="qmessage.html">QMessage</a> <i>m</i> on the messaging store. Returns <tt>true</tt> if the operation successfully updates the store; otherwise returns <tt>false</tt>.</p>
<p>To ensure the change is propagated to any affected external server <a href="qmessageserviceaction.html#exportUpdates">QMessageServiceAction::exportUpdates</a>() should be subsequently called.</p>
<p>See also <a href="qmessagestore.html#addMessage">addMessage</a>(), <a href="qmessagestore.html#removeMessage">removeMessage</a>(), and <a href="qmessageserviceaction.html#exportUpdates">QMessageServiceAction::exportUpdates</a>().</p>
<p /><address><hr /><div align="center">
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td align="left">Copyright &copy; 2009 Nokia Corporation and/or its subsidiary(-ies)</td>
<td width="20%" align="center"><a href="trademarks.html">Trademarks</a></td>
<td align="right"><div align="right">Qt Mobility Project 1.0.0</div></td>
</tr></table></div></address></body>
</html>
