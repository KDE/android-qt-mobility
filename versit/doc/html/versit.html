<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!-- ../../doc/src/versit.qdoc -->
<head>
  <title>Qt Versit Developer Resources</title>
  <link href="classic.css" rel="stylesheet" type="text/css" />
</head>
<body>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><img src="images/qtlogo.png" align="left" border="0" /></td>
<td width="1">&nbsp;&nbsp;</td><td class="postheader" valign="center"><a href="index.html"><font color="#004faf">Home</font></a></td>
<td align="right" valign="top" width="230"><img src="images/codeless.png"  border="0" /></td></tr></table><h1 class="title">Qt Versit Developer Resources<br /><span class="subtitle"></span>
</h1>
<ul><li><a href="#introduction">Introduction</a></li>
<li><a href="#overview">Overview</a></li>
<li><a href="#using-the-api">Using the API</a></li>
<ul><li><a href="#generating-qcontact-from-vcard-file">Generating QContact from VCard file</a></li>
<li><a href="#generating-vcard-file-from-qcontact">Generating VCard file from QContact</a></li>
<li><a href="#generating-vcard-file-from-qcontact-and-save-to-contact-database">Generating VCard file from QContact and save to contact database</a></li>
</ul>
<li><a href="#building-and-compiling">Building and compiling</a></li>
<li><a href="#reference-documentation">Reference documentation</a></li>
<ul><li><a href="#main-classes">Main classes</a></li>
<li><a href="#asynchronous-requests">Asynchronous Requests</a></li>
<li><a href="#examples">Examples</a></li>
</ul>
</ul>
<a name="introduction"></a>
<h2>Introduction</h2>
<p>TODO : Add introduction about versit parser.</p>
<a name="overview"></a>
<h2>Overview</h2>
<p>TODO : Add overview about versit parser.</p>
<a name="using-the-api"></a>
<h2>Using the API</h2>
<p>This section provides some examples of common usage of the API.</p>
<a name="generating-qcontact-from-vcard-file"></a>
<h3>Generating QContact from VCard file</h3>
<p>TODO : Add code snippet description here</p>
<pre>    QList&lt;QContact&gt; VersitDocSample::generateContact(QIODevice&amp; in)
    {
       <span class="comment">// Seek beginning of the file</span>
       in.seek(0);
       <span class="comment">// Create versit reader and read the vcard file content</span>
       QVersitReader* reader = new QVersitReader;
       reader-&gt;setDevice(&amp;in);
       reader-&gt;readAll();
       <span class="comment">// Get list of QVersitDocument from reader</span>
       QList&lt;QVersitDocument&gt; documents = reader-&gt;result();
       <span class="comment">// Create QVersitContactImporter to convert QVersitDocument into QContact</span>
       QVersitContactImporter importer;
       <span class="comment">// Generate contact from each document</span>
       QList&lt;QContact&gt; contacts;
       foreach (QVersitDocument document, documents) {
                <span class="comment">// VCard may have image and audio ( Like LOGO,RINGTONE etc)</span>
                <span class="comment">// Configure the storage location of this content</span>
            importer.setImagePath(QString::fromAscii(&quot;/images/&quot;));
            importer.setAudioClipPath(QString::fromAscii(&quot;/audio/&quot;));
            <span class="comment">// Converts QVersitDocument into QContact</span>
            QContact contact = importer.importContact(document);
            <span class="comment">// Append contact to contact List</span>
            contacts.append(contact);
        }
        delete reader;
        return contacts;
    }</pre>
<a name="generating-vcard-file-from-qcontact"></a>
<h3>Generating VCard file from QContact</h3>
<p>TODO : Add code snippet description here</p>
<pre>    void VersitDocSample::generateVCard(QContact&amp; contact)
    {
        <span class="comment">// Create versit writer</span>
        QVersitWriter* writer = new QVersitWriter;
        <span class="comment">// Create file and set to writer</span>
        QFile out(&quot;testvcard_2.1-vcf&quot;);
        out.open(QIODevice::ReadWrite);
        writer-&gt;setDevice(&amp;out);
        <span class="comment">// Create QVersitContactExporter to convert QContact into QVersitDocument</span>
        QVersitContactExporter exporter;
        connect(&amp;exporter, SIGNAL(scale(const QString&amp;,QByteArray&amp;)),
                0, SLOT(scale(const QString&amp;,QByteArray&amp;)));
        <span class="comment">// Create versit document</span>
        QVersitDocument document = exporter.exportContact(contact,QVersitDocument::VCard21);
        <span class="comment">// Encode and write to output file</span>
        writer-&gt;setVersitDocument(document);
        writer-&gt;writeAll();
    }</pre>
<a name="generating-vcard-file-from-qcontact-and-save-to-contact-database"></a>
<h3>Generating VCard file from QContact and save to contact database</h3>
<p>TODO : Add code snippet description here</p>
<pre>    void VersitDocSample::generateAndSaveContact(QFile&amp; in)
    {
       <span class="comment">// Seek beginning of the file</span>
       in.seek(0);
       <span class="comment">// Create versit reader and read the vcard file content</span>
       QVersitReader* reader = new QVersitReader;
       reader-&gt;setDevice(&amp;in);
       reader-&gt;readAll();
       <span class="comment">// Get list of QVersitDocument from reader</span>
       QList&lt;QVersitDocument&gt; documents = reader-&gt;result();
       <span class="comment">// Create QVersitContactImporter to convert QVersitDocument into QContact</span>
       QVersitContactImporter importer;
       <span class="comment">// Generate contact from each document</span>
       foreach (QVersitDocument document, documents) {
            <span class="comment">// VCard may have image and audio ( Like LOGO,RINGTONE etc)</span>
            <span class="comment">// Configure the storage location of this content</span>
            importer.setImagePath(QString::fromAscii(&quot;/images/&quot;));
            importer.setAudioClipPath(QString::fromAscii(&quot;/audio/&quot;));
            <span class="comment">// Converts QVersitDocument into QContact</span>
            QContact contact = importer.importContact(document);
            <span class="comment">// Save contact</span>
            QContactManager* contactManager = new QContactManager(QString::fromAscii(&quot;symbian&quot;));
            contactManager-&gt;saveContact(&amp;contact);
            delete contactManager;
        }
    }</pre>
<a name="building-and-compiling"></a>
<h2>Building and compiling</h2>
<p>This library requires Qt 4.5 to be installed.</p>
<p>To build the library, run <tt>qmake</tt> and <tt>make</tt>.</p>
<a name="reference-documentation"></a>
<h2>Reference documentation</h2>
<a name="main-classes"></a>
<h3>Main classes</h3>
<ul>
<li><a href="qversitdocument.html">QVersitDocument</a></li>
<li><a href="qversitproperty.html">QVersitProperty</a></li>
<li><a href="qversitreader.html">QVersitReader</a></li>
<li><a href="qversitwriter.html">QVersitWriter</a></li>
<li><a href="qversitcontactimporter.html">QVersitContactImporter</a></li>
<li><a href="qversitcontactexporter.html">QVersitContactExporter</a></li>
</ul>
<a name="asynchronous-requests"></a>
<h3>Asynchronous Requests</h3>
<p>TODO : Add asynchrnous operations</p>
<a name="examples"></a>
<h3>Examples</h3>
<p>TODO : Add example code here</p>
<p /><address><hr /><div align="center">
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td align="left">Copyright &copy; 2009 Nokia Corporation and/or its subsidiary(-ies)</td>
<td align="right"><div align="right">Qt Contacts</div></td>
</tr></table></div></address></body>
</html>
