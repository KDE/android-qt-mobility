#!/bin/bash

if [ -z "$1" ]; then
echo "usage: $0 <contact-uri> <contact-uid> <im-id> <accountPath> <imPresence> <statusMessage> <protocol> <nameGiven> <nameFamily>"
exit 1
fi

echo "create nco:IMAccount"
tracker-sparql -u -q "
INSERT 
{ 
<telepathy:$4> 
<http://www.w3.org/1999/02/22-rdf-syntax-ns#type> 
<http://www.semanticdesktop.org/ontologies/2007/03/22/nco#IMAccount>
}
"

tracker-sparql -u -q "
INSERT 
{ 
<telepathy:$4> 
 nco:imDisplayName '$7' 
}
"

echo "create nco:IMContact"
tracker-sparql -u -q "
INSERT
{
<$1>
<http://www.w3.org/1999/02/22-rdf-syntax-ns#type>
<http://www.semanticdesktop.org/ontologies/2007/03/22/nco#IMContact>
}
"

echo "create nco:IMContact"
tracker-sparql --update --query "
INSERT {
	    <$1> a nco:IMContact;
	    nco:contactUID '$2';
	    nco:imContactId '$3';
	    nco:imContactNickname '$8$9';
	    nco:imContactPresence $5;
	    nco:imContactStatusMessage '$6';
	    nco:fromIMAccount <telepathy:$4>;
	    nco:imContactCapability <bogus>
}
"

echo "update nco:IMContact"
tracker-sparql --update --query "INSERT {
        <$1> a nco:IMContact;
	    nco:nameGiven '$8';
        nco:nameFamily '$9'
}
"